<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Appointment | Eugenie Coetzer Optometrists</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --color-primary: #0077B6;
      --color-secondary: #00B4D8;
      --color-accent: #48CAE4;
      --color-success: #06D6A0;
      --color-warning: #FFD60A;
      --color-background: #FFFFFF;
      --color-text: #1D3557;
      --color-gray: #F1F3F5;
      --font-heading: 'Poppins', sans-serif;
      --font-body: 'Open Sans', sans-serif;
      --border-radius: 12px;
      --shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-body);
      background: linear-gradient(135deg, #E3F2FD 0%, #F8F9FA 100%);
      color: var(--color-text);
      min-height: 100vh;
      padding: 2rem;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .header h1 {
      font-family: var(--font-heading);
      font-size: 2.5rem;
      color: var(--color-primary);
      margin-bottom: 0.5rem;
    }

    .header p {
      color: var(--color-text);
      opacity: 0.8;
    }

    .back-btn {
      display: inline-block;
      padding: 0.75rem 1.5rem;
      background: var(--color-gray);
      color: var(--color-text);
      border-radius: var(--border-radius);
      text-decoration: none;
      font-weight: 600;
      margin-bottom: 2rem;
      transition: all 0.3s ease;
    }

    .back-btn:hover {
      background: var(--color-primary);
      color: white;
    }

    .booking-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-bottom: 2rem;
    }

    @media (max-width: 768px) {
      .booking-grid {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: white;
      border-radius: var(--border-radius);
      padding: 2rem;
      box-shadow: var(--shadow);
    }

    .card h2 {
      font-family: var(--font-heading);
      color: var(--color-primary);
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }

    /* Calendar Styles */
    .calendar {
      width: 100%;
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding: 1rem;
      background: var(--color-gray);
      border-radius: var(--border-radius);
    }

    .calendar-header button {
      background: var(--color-primary);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .calendar-header button:hover {
      background: var(--color-secondary);
    }

    .calendar-month {
      font-weight: 700;
      font-size: 1.25rem;
      color: var(--color-text);
    }

    .calendar-weekdays {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }

    .weekday {
      text-align: center;
      font-weight: 600;
      color: var(--color-text);
      padding: 0.5rem;
      font-size: 0.875rem;
    }

    .calendar-days {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 0.5rem;
    }

    .day {
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
      position: relative;
    }

    .day:hover {
      background: var(--color-accent);
      color: white;
      transform: scale(1.05);
    }

    .day.today {
      background: var(--color-gray);
      font-weight: 700;
    }

    .day.selected {
      background: var(--color-primary);
      color: white;
    }

    .day.disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .day.disabled:hover {
      transform: none;
      background: none;
      color: inherit;
    }

    .day.has-appointments::after {
      content: '';
      position: absolute;
      bottom: 4px;
      width: 6px;
      height: 6px;
      background: var(--color-warning);
      border-radius: 50%;
    }

    /* Time Slots */
    .time-slots {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.75rem;
    }

    @media (max-width: 768px) {
      .time-slots {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    .time-slot {
      padding: 1rem;
      border: 2px solid var(--color-gray);
      border-radius: var(--border-radius);
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .time-slot:hover {
      border-color: var(--color-primary);
      background: var(--color-accent);
      color: white;
    }

    .time-slot.selected {
      background: var(--color-primary);
      color: white;
      border-color: var(--color-primary);
    }

    .time-slot.booked {
      background: var(--color-gray);
      cursor: not-allowed;
      opacity: 0.5;
    }

    .time-slot.booked:hover {
      border-color: var(--color-gray);
      background: var(--color-gray);
      color: inherit;
    }

    /* Form */
    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--color-text);
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 0.875rem;
      border: 2px solid var(--color-gray);
      border-radius: var(--border-radius);
      font-family: var(--font-body);
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--color-primary);
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .checkbox-group input[type="checkbox"] {
      width: auto;
      cursor: pointer;
    }

    .btn {
      display: block;
      width: 100%;
      padding: 1rem;
      background: var(--color-primary);
      color: white;
      border: none;
      border-radius: var(--border-radius);
      font-size: 1.125rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: var(--font-heading);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .btn:hover {
      background: var(--color-secondary);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 119, 182, 0.3);
    }

    .btn:disabled {
      background: var(--color-gray);
      cursor: not-allowed;
      transform: none;
    }

    .appointment-summary {
      background: var(--color-gray);
      padding: 1.5rem;
      border-radius: var(--border-radius);
      margin-bottom: 1.5rem;
    }

    .appointment-summary h3 {
      font-family: var(--font-heading);
      color: var(--color-primary);
      margin-bottom: 1rem;
    }

    .summary-item {
      display: flex;
      justify-content: space-between;
      padding: 0.5rem 0;
      border-bottom: 1px solid rgba(0,0,0,0.1);
    }

    .summary-item:last-child {
      border-bottom: none;
    }

    .summary-label {
      font-weight: 600;
    }

    /* Success Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      padding: 3rem;
      border-radius: var(--border-radius);
      max-width: 500px;
      text-align: center;
    }

    .modal-content .success-icon {
      font-size: 4rem;
      color: var(--color-success);
      margin-bottom: 1rem;
    }

    .modal-content h2 {
      color: var(--color-primary);
      margin-bottom: 1rem;
    }

    .modal-content p {
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }

    .appointments-list {
      margin-top: 2rem;
    }

    .appointment-card {
      background: white;
      padding: 1.5rem;
      border-radius: var(--border-radius);
      margin-bottom: 1rem;
      border-left: 4px solid var(--color-primary);
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .appointment-card h4 {
      color: var(--color-primary);
      margin-bottom: 0.5rem;
    }

    .appointment-details {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.5rem;
      font-size: 0.9rem;
    }

    .reminder-badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      background: var(--color-warning);
      color: var(--color-text);
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
      margin-top: 0.5rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <a href="index.html" class="back-btn">â† Back to Home</a>

    <div class="header">
      <h1>ğŸ“… Book Your Appointment</h1>
      <p>Choose your preferred date and time for an eye examination</p>
    </div>

    <div class="booking-grid">
      <!-- Calendar Section -->
      <div class="card">
        <h2>Select Date</h2>
        <div class="calendar">
          <div class="calendar-header">
            <button id="prevMonth">â†</button>
            <div class="calendar-month" id="currentMonth"></div>
            <button id="nextMonth">â†’</button>
          </div>

          <div class="calendar-weekdays">
            <div class="weekday">Sun</div>
            <div class="weekday">Mon</div>
            <div class="weekday">Tue</div>
            <div class="weekday">Wed</div>
            <div class="weekday">Thu</div>
            <div class="weekday">Fri</div>
            <div class="weekday">Sat</div>
          </div>

          <div class="calendar-days" id="calendarDays"></div>
        </div>
      </div>

      <!-- Time Slots Section -->
      <div class="card">
        <h2>Available Time Slots</h2>
        <p style="margin-bottom: 1rem; opacity: 0.7;">Hours: Mon-Fri 8:30-17:00, Sat 8:30-12:00</p>
        <div class="time-slots" id="timeSlots">
          <div class="time-slot">Select a date first</div>
        </div>
      </div>
    </div>

    <!-- Booking Form -->
    <div class="card">
      <h2>Your Information</h2>

      <div class="appointment-summary" id="summary" style="display: none;">
        <h3>Appointment Summary</h3>
        <div class="summary-item">
          <span class="summary-label">Date:</span>
          <span id="summaryDate">-</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Time:</span>
          <span id="summaryTime">-</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Service:</span>
          <span id="summaryService">-</span>
        </div>
      </div>

      <form id="bookingForm">
        <div class="form-group">
          <label for="name">Full Name *</label>
          <input type="text" id="name" name="name" required placeholder="John Doe">
        </div>

        <div class="form-group">
          <label for="phone">Phone Number (WhatsApp) *</label>
          <input type="tel" id="phone" name="phone" required placeholder="+27 12 345 6789"
                 pattern="[\+]?[0-9\s\-\(\)]+">
          <small style="opacity: 0.7;">We'll send confirmation and reminders via WhatsApp</small>
        </div>

        <div class="form-group">
          <label for="email">Email *</label>
          <input type="email" id="email" name="email" required placeholder="john@example.com">
        </div>

        <div class="form-group">
          <label for="service">Type of Service *</label>
          <select id="service" name="service" required>
            <option value="">Select a service</option>
            <option value="eye-exam">Comprehensive Eye Examination</option>
            <option value="contact-lens">Contact Lens Fitting</option>
            <option value="frame-selection">Designer Frame Selection</option>
            <option value="follow-up">Follow-up Appointment</option>
            <option value="emergency">Emergency Eye Care</option>
          </select>
        </div>

        <div class="form-group">
          <label for="notes">Additional Notes (Optional)</label>
          <textarea id="notes" name="notes" rows="3"
                    placeholder="Any specific concerns or requirements..."></textarea>
        </div>

        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" id="whatsappReminder" name="whatsappReminder" checked>
            <label for="whatsappReminder">Send me a WhatsApp reminder 1 hour before my appointment</label>
          </div>
        </div>

        <button type="submit" class="btn" id="submitBtn" disabled>
          Complete Booking
        </button>
      </form>
    </div>

    <!-- Mock Appointments List -->
    <div class="card appointments-list">
      <h2>ğŸ“‹ Upcoming Appointments (Mock Data)</h2>
      <div id="mockAppointments"></div>
    </div>
  </div>

  <!-- Success Modal -->
  <div class="modal" id="successModal">
    <div class="modal-content">
      <div class="success-icon">âœ…</div>
      <h2>Appointment Confirmed!</h2>
      <p>Your appointment has been successfully booked.</p>
      <p><strong>Confirmation sent to:</strong><br>
      WhatsApp: <span id="confirmPhone"></span><br>
      Email: <span id="confirmEmail"></span></p>
      <p style="background: var(--color-gray); padding: 1rem; border-radius: 8px; margin-top: 1rem;">
        <strong>ğŸ“² WhatsApp Notifications:</strong><br>
        âœ… Instant confirmation<br>
        â° Reminder 1 hour before<br>
        ğŸ“… Appointment details
      </p>
      <button class="btn" onclick="closeModal()">Done</button>
    </div>
  </div>

  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // MOCK DATA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    const mockAppointments = [
      {
        id: 1,
        name: "Sarah Johnson",
        date: "2025-12-26",
        time: "09:00",
        service: "Comprehensive Eye Examination",
        phone: "+27 12 345 6789",
        status: "confirmed"
      },
      {
        id: 2,
        name: "Michael Smith",
        date: "2025-12-26",
        time: "10:30",
        service: "Contact Lens Fitting",
        phone: "+27 82 123 4567",
        status: "confirmed"
      },
      {
        id: 3,
        name: "Lisa van der Merwe",
        date: "2025-12-27",
        time: "14:00",
        service: "Designer Frame Selection",
        phone: "+27 71 234 5678",
        status: "confirmed"
      },
      {
        id: 4,
        name: "David Brown",
        date: "2025-12-30",
        time: "11:00",
        service: "Follow-up Appointment",
        phone: "+27 83 345 6789",
        status: "pending"
      }
    ];

    // Store booked slots by date
    const bookedSlots = {};
    mockAppointments.forEach(apt => {
      if (!bookedSlots[apt.date]) bookedSlots[apt.date] = [];
      bookedSlots[apt.date].push(apt.time);
    });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // STATE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    let currentDate = new Date();
    let selectedDate = null;
    let selectedTime = null;

    const monthNames = ["January", "February", "March", "April", "May", "June",
                       "July", "August", "September", "October", "November", "December"];

    const timeSlots = [
      "08:30", "09:00", "09:30", "10:00", "10:30", "11:00", "11:30",
      "12:00", "13:00", "13:30", "14:00", "14:30", "15:00", "15:30", "16:00", "16:30"
    ];

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // CALENDAR RENDERING
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function renderCalendar() {
      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();

      document.getElementById('currentMonth').textContent =
        `${monthNames[month]} ${year}`;

      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      const today = new Date();

      const calendarDays = document.getElementById('calendarDays');
      calendarDays.innerHTML = '';

      // Empty cells before first day
      for (let i = 0; i < firstDay; i++) {
        const emptyDay = document.createElement('div');
        emptyDay.className = 'day disabled';
        calendarDays.appendChild(emptyDay);
      }

      // Days of month
      for (let day = 1; day <= daysInMonth; day++) {
        const dayElement = document.createElement('div');
        dayElement.className = 'day';
        dayElement.textContent = day;

        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        const dayDate = new Date(year, month, day);
        const dayOfWeek = dayDate.getDay();

        // Check if day has appointments
        if (bookedSlots[dateStr]) {
          dayElement.classList.add('has-appointments');
        }

        // Disable past dates
        if (dayDate < today.setHours(0, 0, 0, 0)) {
          dayElement.classList.add('disabled');
        }
        // Disable Sundays and Saturdays after 12:00
        else if (dayOfWeek === 0) {
          dayElement.classList.add('disabled');
        }
        else {
          dayElement.addEventListener('click', () => selectDate(dateStr, dayElement));
        }

        // Highlight today
        if (day === today.getDate() && month === today.getMonth() &&
            year === today.getFullYear()) {
          dayElement.classList.add('today');
        }

        calendarDays.appendChild(dayElement);
      }
    }

    function selectDate(dateStr, element) {
      // Remove previous selection
      document.querySelectorAll('.day.selected').forEach(el =>
        el.classList.remove('selected'));

      element.classList.add('selected');
      selectedDate = dateStr;
      selectedTime = null; // Reset time selection

      renderTimeSlots(dateStr);
      updateSubmitButton();
      updateSummary();
    }

    function renderTimeSlots(dateStr) {
      const timeSlotsContainer = document.getElementById('timeSlots');
      timeSlotsContainer.innerHTML = '';

      const date = new Date(dateStr);
      const dayOfWeek = date.getDay();
      const isSaturday = dayOfWeek === 6;

      timeSlots.forEach(time => {
        // Saturday: only show morning slots (until 12:00)
        if (isSaturday && parseInt(time.split(':')[0]) >= 12) {
          return;
        }

        const slotElement = document.createElement('div');
        slotElement.className = 'time-slot';
        slotElement.textContent = time;

        // Check if slot is booked
        if (bookedSlots[dateStr] && bookedSlots[dateStr].includes(time)) {
          slotElement.classList.add('booked');
          slotElement.textContent += ' (Booked)';
        } else {
          slotElement.addEventListener('click', () => selectTime(time, slotElement));
        }

        timeSlotsContainer.appendChild(slotElement);
      });
    }

    function selectTime(time, element) {
      // Remove previous selection
      document.querySelectorAll('.time-slot.selected').forEach(el =>
        el.classList.remove('selected'));

      element.classList.add('selected');
      selectedTime = time;

      updateSubmitButton();
      updateSummary();
    }

    function updateSubmitButton() {
      const submitBtn = document.getElementById('submitBtn');
      submitBtn.disabled = !(selectedDate && selectedTime);
    }

    function updateSummary() {
      const summary = document.getElementById('summary');
      const serviceSelect = document.getElementById('service');

      if (selectedDate && selectedTime) {
        summary.style.display = 'block';

        const date = new Date(selectedDate);
        const formattedDate = date.toLocaleDateString('en-ZA', {
          weekday: 'long',
          year: 'numeric',
          month: 'long',
          day: 'numeric'
        });

        document.getElementById('summaryDate').textContent = formattedDate;
        document.getElementById('summaryTime').textContent = selectedTime;

        const serviceName = serviceSelect.options[serviceSelect.selectedIndex].text;
        document.getElementById('summaryService').textContent =
          serviceName || 'Not selected';
      } else {
        summary.style.display = 'none';
      }
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // FORM HANDLING
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    document.getElementById('bookingForm').addEventListener('submit', function(e) {
      e.preventDefault();

      if (!selectedDate || !selectedTime) {
        alert('Please select a date and time');
        return;
      }

      const formData = {
        name: document.getElementById('name').value,
        phone: document.getElementById('phone').value,
        email: document.getElementById('email').value,
        service: document.getElementById('service').value,
        notes: document.getElementById('notes').value,
        date: selectedDate,
        time: selectedTime,
        whatsappReminder: document.getElementById('whatsappReminder').checked
      };

      // Simulate booking
      console.log('Booking appointment:', formData);

      // Show success modal
      document.getElementById('confirmPhone').textContent = formData.phone;
      document.getElementById('confirmEmail').textContent = formData.email;
      document.getElementById('successModal').classList.add('active');

      // Simulate WhatsApp notification
      simulateWhatsAppNotification(formData);

      // Simulate reminder scheduling
      if (formData.whatsappReminder) {
        scheduleReminder(formData);
      }

      // Add to booked slots
      if (!bookedSlots[selectedDate]) bookedSlots[selectedDate] = [];
      bookedSlots[selectedDate].push(selectedTime);

      // Add to mock appointments
      mockAppointments.push({
        id: mockAppointments.length + 1,
        name: formData.name,
        date: formData.date,
        time: formData.time,
        service: formData.service,
        phone: formData.phone,
        status: 'confirmed'
      });

      renderMockAppointments();
    });

    function simulateWhatsAppNotification(data) {
      console.log('ğŸ“² WHATSAPP NOTIFICATION SENT:');
      console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
      console.log(`To: ${data.phone}`);
      console.log(`\nâœ… Appointment Confirmed!`);
      console.log(`\nDear ${data.name},`);
      console.log(`\nYour appointment at Eugenie Coetzer Optometrists has been confirmed:`);
      console.log(`\nğŸ“… Date: ${new Date(data.date).toLocaleDateString('en-ZA', {
        weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
      })}`);
      console.log(`ğŸ• Time: ${data.time}`);
      console.log(`ğŸ‘ï¸ Service: ${data.service}`);
      console.log(`\nğŸ“ Location: Montana Park, Pretoria`);
      console.log(`â˜ï¸ Contact: 012 548 0131`);
      console.log(`\nSee you soon!`);
      console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n');
    }

    function scheduleReminder(data) {
      const appointmentDateTime = new Date(`${data.date}T${data.time}`);
      const reminderTime = new Date(appointmentDateTime.getTime() - (60 * 60 * 1000)); // 1 hour before

      console.log('â° REMINDER SCHEDULED:');
      console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
      console.log(`Reminder will be sent at: ${reminderTime.toLocaleString()}`);
      console.log(`To: ${data.phone}`);
      console.log(`\nMessage Preview:`);
      console.log(`â° Reminder: You have an appointment in 1 hour!`);
      console.log(`\nğŸ“… ${new Date(data.date).toLocaleDateString()}`);
      console.log(`ğŸ• ${data.time}`);
      console.log(`ğŸ‘ï¸ ${data.service}`);
      console.log(`\nğŸ“ Eugenie Coetzer Optometrists`);
      console.log(`Montana Park, Pretoria`);
      console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n');

      // In production, this would integrate with a real scheduling service
      // For now, we'll show it in the console
    }

    function closeModal() {
      document.getElementById('successModal').classList.remove('active');

      // Reset form
      document.getElementById('bookingForm').reset();
      selectedDate = null;
      selectedTime = null;
      document.querySelectorAll('.day.selected').forEach(el =>
        el.classList.remove('selected'));
      document.querySelectorAll('.time-slot.selected').forEach(el =>
        el.classList.remove('selected'));
      document.getElementById('summary').style.display = 'none';
      updateSubmitButton();

      // Re-render calendar to show new booked slot
      renderCalendar();
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // MOCK APPOINTMENTS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function renderMockAppointments() {
      const container = document.getElementById('mockAppointments');
      container.innerHTML = '';

      mockAppointments
        .sort((a, b) => new Date(a.date + ' ' + a.time) - new Date(b.date + ' ' + b.time))
        .forEach(apt => {
          const card = document.createElement('div');
          card.className = 'appointment-card';

          const aptDate = new Date(`${apt.date}T${apt.time}`);
          const now = new Date();
          const oneHourBefore = new Date(aptDate.getTime() - (60 * 60 * 1000));

          card.innerHTML = `
            <h4>${apt.name}</h4>
            <div class="appointment-details">
              <div><strong>ğŸ“… Date:</strong> ${new Date(apt.date).toLocaleDateString()}</div>
              <div><strong>ğŸ• Time:</strong> ${apt.time}</div>
              <div><strong>ğŸ‘ï¸ Service:</strong> ${apt.service}</div>
              <div><strong>ğŸ“± Phone:</strong> ${apt.phone}</div>
            </div>
            ${now >= oneHourBefore && now < aptDate ?
              '<span class="reminder-badge">ğŸ”” Reminder sent 1hr ago</span>' :
              now < oneHourBefore ?
              '<span class="reminder-badge" style="background: var(--color-success); color: white;">âœ… Confirmed</span>' :
              '<span class="reminder-badge" style="background: var(--color-gray);">âœ“ Completed</span>'
            }
          `;

          container.appendChild(card);
        });
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // EVENT LISTENERS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    document.getElementById('prevMonth').addEventListener('click', () => {
      currentDate.setMonth(currentDate.getMonth() - 1);
      renderCalendar();
    });

    document.getElementById('nextMonth').addEventListener('click', () => {
      currentDate.setMonth(currentDate.getMonth() + 1);
      renderCalendar();
    });

    document.getElementById('service').addEventListener('change', updateSummary);

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // INITIALIZATION
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    renderCalendar();
    renderMockAppointments();

    // Simulated real-time reminder check
    setInterval(() => {
      const now = new Date();
      mockAppointments.forEach(apt => {
        const aptDate = new Date(`${apt.date}T${apt.time}`);
        const oneHourBefore = new Date(aptDate.getTime() - (60 * 60 * 1000));

        // Check if it's time to send reminder (within 1 minute window)
        if (Math.abs(now - oneHourBefore) < 60000) {
          console.log(`â° SENDING REMINDER NOW for ${apt.name}!`);
          console.log(`ğŸ“² WhatsApp to ${apt.phone}: "Your appointment is in 1 hour!"`);
        }
      });
    }, 60000); // Check every minute
  </script>
</body>
</html>
